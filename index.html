<html>
<head>

<meta charset="utf-8">
<title>Map</title>

<script src="graphics.js"></script>
<script src="debug.js"></script>
<script src="tileClasses.js"></script>
<script src="map.js"></script>
<script src="math_functions.js"></script>
<script src="tile_chooser.js"></script>
<script src="island.js"></script>

<style>


.selectDisable {
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -o-user-select: none;
    user-select: none;
}

</style>


<script language="javascript">

function writeValue(var_name){

    var value = Math.round( 100 * document.getElementById('range-' + var_name).value) / 100;
    document.getElementById('value-' + var_name).innerHTML = '<' + value + '>';

}

var is_map_movable = false;
var map = null;
var myWindow = null;
var graphics = null;

function gen(){

    var inputs = [];
    inputs.push( document.getElementById('range-map_height').value );
    inputs.push( document.getElementById('range-island_n').value );
    inputs.push( document.getElementById('range-land_ratio').value );
    inputs.push( document.getElementById('range-average_height').value );
    inputs.push( document.getElementById('range-humidity').value );
    inputs.push( document.getElementById('range-indentation').value );
    inputs.push( document.getElementById('range-average_T').value );

    if(map != null){

        map.destroy();
        map = null;
    }

    map = new Map(inputs, graphics);
}

var x0 = null;
var y0 = null;

function mouseMove(event){
    if(is_map_movable){

        var x1 = event.clientX;
        var y1 = event.clientY;

        vector = [x1 - x0, y1 - y0];
        myWindow.update(vector);

        x0 = x1;
        y0 = y1;
    }
}

function mouseDown(event){

    is_map_movable = true;
    x0 = event.clientX;
    y0 = event.clientY;

}

function mouseUp(){ is_map_movable = false;   }

function load(){

    graphics = new Graphics();
    myWindow = new GraphicsWindow(graphics);

}
</script>


</head>
<body onload="load();">
    <div style="float: left; width: 50%;">
        výška mapy: 5<input oninput="writeValue('map_height');" type="range" min="5" max="20" value="10" step="1" id="range-map_height">20
        <span id="value-map_height"><></span>
        <br>
        Počet ostrovů: 1<input oninput="writeValue('island_n');" type="range" min="1" max="10" value="5" step="1" id="range-island_n">10
        <span id="value-island_n"><></span>
        <br>
        Poměr oceánu a pevniny (vyšší -> více pevniny): 0<input oninput="writeValue('land_ratio');" type="range" min="0" max="1" step="any" value="0.5" id="range-land_ratio">1
        <span id="value-land_ratio"><></span>
    </div>

    <div>
        Střední nadmořská výška: 100<input oninput="writeValue('average_height');" type="range" min="100" max="3000" value="1000" step="10" id="range-average_height">3000
        <span id="value-average_height"><></span>
        <br>
        Vlhkost: 0<input oninput="writeValue('humidity');" type="range" min="0" max="1" value="0.5" step="any" id="range-humidity">1
        <span id="value-humidity"><></span>
        <br>
        Horizontální členitost: 0<input oninput="writeValue('indentation');" type="range" min="0" max="1" step="any" value="5" id="range-indentation">1
        <span id="value-indentation"><></span>
        <br/>
        Průměrná teplota: 0<input oninput="writeValue('average_T');" type="range" min="0" max="25" value="12" step="0.5" id="range-average_T">25
        <span id="value-average_T"><></span>
    </div>

    <input type="button" value="Generuj" onClick="gen();">
    <div onmousedown="mouseDown(event);" onmouseup="mouseUp();" onmousemove="mouseMove(event);"
    style="position: relative; overflow: hidden; z-index: 10; top: 20%; left: 3%; border: solid 1px; width: 94%; height: 78%;" id="mapDiv"></div>

</body>
</html>
